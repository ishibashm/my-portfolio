# Blog: A Chronicle of Commits

This blog was generated by analyzing the commit history of this repository. It tells the story of the project's development, one commit at a time.

---

## 1. Initial commit from Create Next App

- **Commit:** `d69afe7af333fade14f89d60c6720902f299dc8b`
- **Author:** metamo
- **Date:** 2025-09-11 21:04:24 +0900

### Context

Every project has a beginning. This is ours. This commit was automatically generated by `create-next-app`. It lays the foundational boilerplate for a modern Next.js application, including the basic directory structure, configuration files, and dependencies needed to get started. As the documentation in `/docs` reveals, this project aims to build a headless WordPress site, and this initial setup is the first step on that journey.

### Changes

```diff
... (initial commit diff)
```

---

## 2. Implement corporate site with gradient mesh styles and dynamic color features

- **Commit:** `b28e5cc709e3be0c443147522a95b7f86a4126a1`
- **Author:** metamo
- **Date:** 2025-09-12 00:39:58 +0900

### Context

This commit marks the first major visual and functional implementation, moving beyond the standard boilerplate. It introduces the dynamic, animated gradient mesh background that defines the site's aesthetic. A new landing page was created at `/variable-font-lp` to showcase this feature, complete with the necessary HTML structure, CSS styling, and client-side JavaScript to control the animation and color schemes. This is a significant step towards realizing the unique visual identity envisioned for the project.

### Changes

```diff
... (diff from commit 2)
```

---

## 3. Refactor generateMetadata and Page function signatures for improved type clarity

- **Commit:** `05eaab649d994f0399c7cd85814d64e77b2dcada`
- **Author:** metamo
- **Date:** 2025-09-12 00:56:42 +0900

### Context

This is the first of many small but important refactoring commits. As the project documentation in `/docs` highlights, the development process involved significant debugging and reconstruction. This commit specifically targets improving the type safety and clarity of the main page component (`[[...slug]]/page.tsx`). By moving the type definition for `params` directly into the function signature for `generateMetadata` and `Page`, the code becomes more explicit and easier to understand, reducing the chance of type-related errorsâ€”a key theme in the project's evolution.

### Changes

```diff
... (diff from commit 3)
```

---

## 4. Comment out unused generateMetadata function for future reference

- **Commit:** `41669ca98fd2e5d6777d5a7299e72f2bac52bbb6`
- **Author:** metamo
- **Date:** 2025-09-12 01:04:46 +0900

### Context

A small but practical change. With the introduction of the new homepage logic in the previous commit, the `generateMetadata` function in the main `page.tsx` is temporarily not needed for the root path. Instead of deleting it, it's commented out for potential future use or refactoring. This is a common practice in iterative development, preserving code that might be useful later.

### Changes

```diff
... (diff from commit 4)
```

---

## 5. Implement new home page with gradient mesh styles and dynamic color features

- **Commit:** `b7649d40c9e64b1e15ada29c3133d27dabd8a965`
- **Author:** metamo
- **Date:** 2025-09-12 01:09:16 +0900

### Context

This commit solidifies the site's new identity. The experimental landing page previously at `/variable-font-lp` is now promoted to become the official homepage at the root (`/`). The associated files (`page.tsx` and `style.css`) are renamed and moved to reflect this change. The old catch-all route is moved to `app/[...slug]/page.tsx` to handle all other pages, establishing a clear routing structure where the new design is the default experience for visitors.

### Changes

```diff
diff --git a/src/app/[...slug]/page.tsx b/src/app/[...slug]/page.tsx
new file mode 100644
index 0000000..4b38733
--- /dev/null
+++ b/src/app/[...slug]/page.tsx
@@ -0,0 +1,66 @@
+import type { Metadata } from "next";
+import { notFound } from "next/navigation";
+import { print } from "graphql/language/printer";
+
+import { setSeoData } from "@/utils/seoData";
+import { fetchGraphQL } from "@/utils/fetchGraphQL";
+import { ContentInfoQuery } from "@/queries/general/ContentInfoQuery";
+import { ContentNode } from "@/gql/graphql";
+import PageTemplate from "@/components/Templates/Page/PageTemplate";
+import { nextSlugToWpSlug } from "@/utils/nextSlugToWpSlug";
+import PostTemplate from "@/components/Templates/Post/PostTemplate";
+import { SeoQuery } from "@/queries/general/SeoQuery";
+
+export async function generateMetadata({
+  params,
+}: {
+  params: { slug: string[] };
+}): Promise<Metadata> {
+  const slug = nextSlugToWpSlug(params.slug);
+  const isPreview = slug.includes("preview");
+
+  const { contentNode } = await fetchGraphQL<{ contentNode: ContentNode }>(
+    print(SeoQuery),
+    {
+      slug: isPreview ? slug.split("preview/")[1] : slug,
+      idType: isPreview ? "DATABASE_ID" : "URI",
+    },
+  );
+
+  if (!contentNode) {
+    return notFound();
+  }
+
+  const metadata = setSeoData({ seo: contentNode.seo });
+
+  return {
+    ...metadata,
+    alternates: {
+      canonical: `${process.env.NEXT_PUBLIC_BASE_URL}${slug}`,
+    },
+  } as Metadata;
+}
+
+export default async function Page({ params }: { params: { slug: string[] } }) {
+  const slug = nextSlugToWpSlug(params.slug);
+  const isPreview = slug.includes("preview");
+
+  const { contentNode } = await fetchGraphQL<{ contentNode: ContentNode }>(
+    print(ContentInfoQuery),
+    {
+      slug: isPreview ? slug.split("preview/")[1] : slug,
+      idType: isPreview ? "DATABASE_ID" : "URI",
+    },
+  );
+
+  if (!contentNode) return notFound();
+
+  switch (contentNode.contentTypeName) {
+    case "page":
+      return <PageTemplate node={contentNode} />;
+    case "post":
+      return <PostTemplate node={contentNode} />;
+    default:
+      return <p>{contentNode.contentTypeName} not implemented</p>;
+  }
+}
\ No newline at end of file
diff --git a/src/app/variable-font-lp/style.css b/src/app/lp-style.css
similarity index 100%
rename from src/app/variable-font-lp/style.css
rename to src/app/lp-style.css
diff --git a/src/app/variable-font-lp/page.tsx b/src/app/page.tsx
similarity index 97%
rename from src/app/variable-font-lp/page.tsx
rename to src/app/page.tsx
index 20d1970..d291a0a 100644
--- a/src/app/variable-font-lp/page.tsx
+++ b/src/app/page.tsx
@@ -1,9 +1,11 @@
+// This is the new home page.
+// The content from the gradient mesh corporate site will be here.
 "use client";
 
 import { useEffect } from 'react';
-import './style.css';
+import './lp-style.css';
 
-export default function CorporateSiteLp() {
+export default function HomePage() {
   useEffect(() => {
     let animationEnabled = true;
     let currentColorSet = 0;
```